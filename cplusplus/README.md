# C++

## Quickstart

> Set up development environment

1. Install LLVM
2. Install CMake
3. Install Ninja
   - Download executable and add to path
4. Install EasyClangComplete for Sublime Text
5. Install CMake for Sublime


## Toolchain

- [Compiler](#compiler)
  - [clang](#clang)
- [Build System](#build-system)
  - [Ninja](#ninja)
  - [Make](#make)
- [Meta Build System](#meta-build-system)
  - CMake
- Editor
  - [Sublime Text](#sublime-text)

Resources:
- [Reddit: Setting up a modern C++ dev environment](https://www.reddit.com/r/cpp/comments/af74l1/recommendations_for_setting_up_a_modern_c_dev/)
- [Bartek: Guide to the modern C++ ecosystem](https://www.bfilipek.com/2019/10/cppecosystem.html)

## Compiler

### Clang

- Install the [latest binaries for Windows 64 bit](http://releases.llvm.org/download.html).
- No need to add Clang to the path. You can instead define an alias if you want
  to access it from the command line:
```sh
alias clang++="C:\\Program Files\\LLVM\\bin\\clang++.exe" $*
```
etc.

Compile a single file:
```sh
clang++ main.cpp
```

Compile and link multiple files in single step:
```sh
clang++ main.cpp test.cpp
```

Compile single source code file into object code (preprocess, compile and assemble):
```sh
clang++ -c test.cpp
```

Link to single executable:
```sh
clang++ main.o test.o
```

Options:
- `-Ipath/to/dir`: Add directory to include search path
- `-Dname=value`: Define macro
- `-o name.exe`: Choose name for executable (`a.exe` by default)

## Build System

### Make

- [Compilation](https://www.cs.fsu.edu/~myers/c++/notes/compilation.html)
- [Compilation with gcc](https://www.cs.fsu.edu/~myers/howto/g++compiling.txt)
- [Makefiles](https://www.cs.fsu.edu/~myers/howto/makefiles.txt)

### Ninja

Ninja is a build tool similar to make, but faster and simpler. It is available
for different platforms as a single executable.
- Download the [Ninja binary](https://ninja-build.org/)
- Put it on the path and make sure you can call `ninja`. Currently I did not
  find a way to configure it in the command line.
- Use the Ninja generator in CMake: `cmake -G Ninja`


## Meta Build System

### CMake

CMake can generate configuration files for different compilers and build tools
from a single configuration file. As a second step, the actual build tool
performs the build task. CMake is especially helpful if you work across
different platforms.

The `CMakeLists.txt` also works as a project file for many
IDEs and tools, for example EasyClangComplete for Sublime Text.

Setup:
- Download the [latest binaries for win64](https://cmake.org/download/).
- No need to add CMake to the path, you can instead define an alias:
```sh
alias cmake="C:/Program Files/CMake/bin/cmake.exe" $*
```

Resources:
- [LLVM CMake primer](https://llvm.org/docs/CMakePrimer.html)
- [Presentation on modern CMake](https://github.com/boostcon/cppnow_presentations_2017/blob/master/05-19-2017_friday/effective_cmake__daniel_pfeifer__cppnow_05-19-2017.pdf)
- [C++ Weekly: Intro to CMake (Video)](https://www.youtube.com/watch?v=HPMvU64RUTY)


## Sublime Text

### Sublime Text

- Install the `CMake` package for syntax highlighting of `CMakeLists.txt`.
- Install `EasyClangComplete` for fully-fledged auto-completion. It uses CMake
  to generate the necessary symbols.
- Define the correct paths to the Clang and CMake executables in your
  `EasyClangComplete.sublime-settings`, if they are not on `PATH`:
```json
{
    "cmake_binary": "C:\\Program Files\\CMake\\bin\\cmake.exe",
    "clang_binary": "C:\\Program Files\\LLVM\\bin\\clang++.exe"
}
```
- See [the documentation](https://niosus.github.io/EasyClangComplete/settings/)
  for more settings. You can also add project-specific settings. You need to
  prefix the option name with `ecc_` in your `.sublime-project`. Especially
  have a look at:
  - `common_flags`: Flags that are passed to clang for every compilation,
    for example include directories.
  - `flags_sources`: Flags that are generated by build system or loaded from
    an external file. Note that common_flags are always appended.
